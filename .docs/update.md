# update

## 2026-01-04

- メッセージ入力部分をtextareaに変更し、Shift+Enterで改行可能に対応。
- テキストエリアの高さを自動調整（最大2行分まで拡張）。
- インラインCSS/JavaScriptを外部ファイル（style.css / main.js）に分離し、コード品質を改善。
- JavaScriptテンプレートリテラル内の不要なホワイトスペースを除去し、チャット履歴の先頭スペース問題を修正。
- 静的ファイル（CSS/JS）にキャッシュバスティング用のバージョンパラメータを追加し、ブラウザキャッシュ問題を解決。
- **画像認識モデル切り替え時のエラーを修正**: 画像認識対応モデルで画像を送信後、画像非対応モデルに切り替えた際にエラーが発生する問題を修正。切替後は過去の画像データをAPIリクエストから除外するように改善。
- **Thinking機能実装**: Ollamaのthinking対応モデル（deepseek-r1、qwqなど）の思考過程を自動検出・抽出し、折りたたみ可能なUIで表示する機能を追加。
  - モデル名から動的にthinking対応を判定
  - `<think>...</think>`タグを自動抽出
  - 思考過程と回答を分離して表示
  - クリックで展開/折りたたみ可能なUI実装
- SSEストリーミング受信を実装し、リアルタイム表示とタイピングカーソル/思考中アニメーションを追加。
- ストリーミング時に `message.reasoning` / `message.thinking` を検出して思考過程を表示できるよう改善。
- 思考ブロック表示時にレスポンス幅が引き伸ばされないよう、バブルの表示制御と折返し設定を調整。
- 画像添付（マルチモーダル）に対応し、画像非対応モデルでは明示的にエラーを返すように改善。

## 2026-01-02

- Ollama（gemma3）用のシンプルなCLIチャットボット基盤を追加。
- .docs 配下の管理ファイルを作成。
- HTTP 404時に詳細を表示し、モデル未取得の案内を追加。
- 高品質なSVGロゴとfaviconを導入。
- チャットUIにAI/ユーザー識別用のアイコンとグラデーションを適用。
- プロジェクトの `README.md` を作成。
- モデル切替直後のタイムアウトを緩和するため、読込時のタイムアウト延長とセッション再生成を追加。
